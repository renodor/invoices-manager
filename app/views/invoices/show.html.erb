<main class="container">
  <div class="invoice-nav <%= hide_on_pdf %>">
    <%= link_to sanitize("&larr; Back to invoices"), invoices_path %>
    <%= link_to 'Export to PDF', '/invoices/55/export_to_pdf.pdf', class: 'btn btn--primary' %>
  </div>

  <div class="invoice">
    <div class="invoice__header">
      <div class="invoice__user">
        <%= render 'user', invoice: @invoice %>
      </div>
      <div class="invoice__client">
        <%= render 'invoices/client', invoice: @invoice, client: @client %>
      </div>
    </div>

    <div class="invoice__infos">
      <%= render 'invoices/infos', invoice: @invoice %>
    </div>

    <div class="invoice__body">
      <div class="invoice__line-items">
        <div class="line-item line-item--header">
          <span class="line-item__description">Description</span>
          <span class="line-item__quantity">Qté</span>
          <span class="line-item__price">Prix unitaire</span>
          <span class="line-item__total">Total HT</span>
        </div>
        <%= turbo_frame_tag nested_dom_id(@invoice, 'line_items') do %>
          <%= render @invoice.line_items.ordered, invoice: @invoice %>
        <% end %>
        <%= turbo_frame_tag nested_dom_id(@invoice, LineItem.new) %>
        <%= button_to svg('plus'),
                    [:new, @invoice, :line_item],
                    method: :get,
                    data: { turbo_frame: nested_dom_id(@invoice, LineItem.new) },
                    class: "btn btn--light btn--icon btn--spaced #{hide_on_pdf}" %>
        <%= turbo_frame_tag dom_id(@invoice, :total) do %>
          <%= render 'total', invoice: @invoice %>
        <% end %>
      </div>
      <p class="invoice__no-tva">TVA non applicable, article 293 B du Code Général des Impôts</p>
    </div>

    <%= render 'payment', invoice: @invoice %>
  </div>

  <% if @invoice.days.present? %>
    <div class="days">
      <div class="day day--header">
        <span class="day__date">Date</span>
        <span class="day__week-day">Day of Week</span>
        <span class="day__worked-hours">Working Hours</span>
        <span class="day__comment">Comment</span>
      </div>
      <%= render @invoice.days.ordered, invoice: @invoice %>
    </div>
  <% else %>
    <%= link_to 'Generate Days', generate_month_invoice_days_path(@invoice) %>
  <% end %>
</main>